# ðŸŽ¨  Arger â€“ Colourful help for Python argparse

`ColourHelpFormatter` is a lightweight drop-in formatter that injects ANSI
colours into the help output generated by Pythonâ€™s `argparse` module.  No
monkey-patching â€“ just pass it via `formatter_class=` when you create your
`ArgumentParser`.

---
## 1  Quick-start

```python
import argparse
from utils.style import arger

parser = argparse.ArgumentParser(
    description="My colourful CLI",
    formatter_class=arger.ColourHelpFormatter  # <- key line
)

parser.add_argument("--foo", default="bar", help="demo option")
parser.parse_args(["-h"])  # â†’ coloured help text
```

That is the only change required.

---
## 2  What gets coloured (defaults)

| Element                               | Colour | Implemented in |
|---------------------------------------|--------|----------------|
| `usage:` prefix                       | green  | `ColourHelpFormatter.add_usage` |
| Section headers                       | green  | `start_section` |
| Option flags `-m`, `--model`          | cyan   | `_format_action_invocation` |
| Metavars `MODEL`, `FILE`, â€¦           | grey   | `_format_args` |
| Default values `(default: â€¦)`         | yellow | `_get_help_string` |

These defaults live in the `Color` enumeration:

```python
from enum import Enum

class Color(str, Enum):
    RED     = "31"
    GREEN   = "32"
    YELLOW  = "33"
    BLUE    = "34"
    MAGENTA = "35"
    CYAN    = "36"
    WHITE   = "37"

    # 256-colour palette examples
    SAGE    = "38;5;108"
    ROSE    = "38;5;167"
    LILAC   = "38;5;141"
```
Adjust any value to suit your theme.

---
## 3  Integrating into an existing script

A minimal diff is enough.  Example taken from `transcribe.py`:

```diff
@@
-from utils.style import ansi
+from utils.style import ansi
+from utils.style import arger        # NEW
@@
-    parser = argparse.ArgumentParser(
-        description="Transcribe audio/video files using WhisperX."
-    )
+    parser = argparse.ArgumentParser(
+        description="Transcribe audio/video files using WhisperX.",
+        formatter_class=arger.ColourHelpFormatter   # NEW
+    )
```

All subsequent `add_argument()` calls remain unchanged.

---
## 4  Adding more colours (256-colour palette)

1. Pick an index from the xterm 256-colour chart (e.g. `108 = sage`).
2. Use `"38;5;<index>"` for foreground or `"48;5;<index>"` for background.
3. Reference it in the formatter:

```python
class ExtendedColor(Color):
    META = "38;5;108"  # pastel green

metavar = _colourise(metavar, ExtendedColor.META)
```

---
## 5  Advanced tweaks

* **Colour selective headers** â€“ inspect `heading` inside `start_section`.
* **Underline / bold** â€“ combine codes, e.g. `"1;4;31"` (bold + underline + red).
* **Disable colours when not on a TTY** â€“ wrap the `_colourise` call with
  `if sys.stderr.isatty(): â€¦`.

---
## 6  FAQ

**Q : I see raw `\x1b[` sequences on Windows**  
A : Windows 10+ supports ANSI by default; older releases need
[`colorama`](https://pypi.org/project/colorama/):

```python
import colorama; colorama.init()
```

**Q : Can I colour positional arguments?**  
A : Yes â€“ override `_format_args()` as shown; the included formatter already
does so (grey by default).

**Q : How do I colour the entire help block background?**  
A : Possible but typically distracting â€“ you would need to emit the escape
sequence before and after calling `parser.print_help()`.

---
Happy colouring! âœ¨
